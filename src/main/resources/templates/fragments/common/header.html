<div th:fragment="header">
    <header>
        <!-- Header Content -->
        <div class="header-left">
            <button class="hamburger-menu" id="hamburger" aria-label="메뉴 열기" aria-expanded="false">&#9776;</button>
            <a th:href="@{/}">
                <img th:src="@{/images/logo.png}" alt="사이트 로고" class="logo">
            </a>
        </div>

        <div class="header-center">
            <div class="search-container">
                <form action="/stores/keywordsearch" method="get">
                    <input type="text" name="keyword" class="search-bar" placeholder="검색어를 입력하세요">
                </form>
                <span class="divider"></span>
                <span class="location-text">New York, NY</span>
            </div>
        </div>

        <div class="header-right">
            <!-- 로그인하지 않은 사용자에게 표시 -->
            <div sec:authorize="!isAuthenticated()">
                <a th:href="@{/user/loginForm}" class="btn btn-primary">로그인</a>
                <a th:href="@{/user/joinForm}" class="btn btn-secondary">회원가입</a>
            </div>

            <!-- 로그인한 사용자에게 표시 -->
            <div sec:authorize="isAuthenticated()" class="user-menu">
                <span class="user-avatar" id="profile-menu-btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
                    <img th:src="@{/images/avatar.jpg}" alt="User Avatar" id="header-profile-pic">
                </span>

                <div class="dropdown-menu dropdown-menu-right" id="dropdown-menu">
                    <ul class="list-unstyled mb-0">
                        <li><a class="dropdown-item" th:href="@{/mypage}"><i
                                class="fas fa-user me-2"></i>
                            마이페이지</a></li>
                        <li><a class="dropdown-item" th:href="@{/friends}"><i class="fas fa-user-friends me-2"></i> 친구
                            찾기</a></li>
                        <li><a class="dropdown-item" th:href="@{/notifications}"><i class="fas fa-bell me-2"></i> 알림</a>
                        </li>
                        <li><a class="dropdown-item" th:href="@{/settings}"><i class="fas fa-cog me-2"></i> 설정</a></li>
                        <li><a class="dropdown-item" th:href="@{/help}"><i class="fas fa-question-circle me-2"></i> 도움말</a>
                        </li>
                        <li><a class="dropdown-item" th:href="@{/user/logout}"><i class="fas fa-sign-out-alt me-2"></i>
                            로그아웃</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
</div>
