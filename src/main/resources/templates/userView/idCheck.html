<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<script th:src="@{/js/jquery-3.7.1.min.js}"></script>
<title>ID 중복확인</title>
<style>
p {
	display: flex;
	justify-content: center;
	align-items: center;
}
</style>
<script>
	$(document).ready(function() {
		$('#inputbutton').click(function() {
			let id = $(this).data('id');
			//let id = $(this).attr('data-id')
			$(opener.document).find('#id').val(id);
			//opener.document.getElementById('id').value = id;

			// opener : 나를 부른 부모 창
			window.close();
		});
	});
</script>
</head>
<body>
	<h1>[ ID 중복 확인 ]</h1>
	<section>
		<form id="searchForm" action="idCheck" method="post">
			검색할 ID <input type="text" name="searchId" id="searchId"> <input
				type="submit" value="검색">
		</form>

		<!-- 검색 후에만 출력 -->
		<div th:if="${searchId != null}">
			<!-- 사용 가능한 경우에만 출력 -->
			<div th:if="${result}">
				<p>
					<span th:text="${searchId}"></span> <span> : 사용할 수 있는 ID입니다.</span>
				</p>
				<p>
					<input type="button" value="ID사용하기" id="inputbutton"
						th:data-id="${searchId}">
				</p>
			</div>
			<!-- 사용 불가능한 경우에만 출력 -->
			<div th:if="${not result}">
				<p>
					<span th:text="${searchId}"></span><span> : 이미 사용중인 ID입니다.</span>
				</p>
			</div>
		</div>
	</section>
</body>
</html>