<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>가게 등록</title>

<script src="/js/jquery-3.7.1.min.js"></script>

<script>
	$(document).ready(function() {
		$('#submitForm').click(function() {
			let registration = {
				userId : $('#userId').val(),
				name : $('#name').val(),
				certification : $('#certification').val(),
				roadNameAddress : $('#roadNameAddress').val(),
				detailAddress : $('#detailAddress').val(),
				zipcode : $("#zipcode").val(),
				phoneNumber : $("#phoneNumber").val(),
				category : $("#category").val(),
				description : $("#description").val(),
				enabled : true
			// 기본적으로 가게는 활성화됨
			};
			
			console.log(registration);

			$.ajax({
				url : 'storeRegistration',
				type : 'post',
				contentType: 'application/json',  // JSON 데이터 형식 명시
			    data: JSON.stringify(registration),  // 데이터를 직렬화
				success : function() {
					$("#response").html("가게가 성공적으로 등록되었습니다.");
				},
				error : function(e) {
					console.log(JSON.stringify(e));
					$("#response").html("가게 등록에 실패했습니다.");
				}
			})
		})
	})
</script>
</head>
<body>
	<h1>가게 등록</h1>
	<form id="storeForm">
		<table>
			<!-- 현재 아이디는 외래키로 가져오는 것이 아닌 임의로 user를 한 명 생성 후 직접 넣어야 돌아감 -->
			<tr>
				<td><label for="userId">아이디</label></td>
				<td><input type="text" id="userId" name="userId" required></td>
			</tr>
			<tr>
				<td><label for="name">가게 이름:</label></td>
				<td><input type="text" id="name" name="name" required></td>
			</tr>
			<tr>
				<td><label for="certification">인증 정보:</label></td>
				<td><input type="text" id="certification" name="certification"
					required></td>
			</tr>
			<tr>
				<td><label for="roadNameAddress">도로명 주소:</label></td>
				<td><input type="text" id="roadNameAddress"
					name="roadNameAddress"></td>
			</tr>
			<tr>
				<td><label for="detailAddress">상세 주소:</label></td>
				<td><input type="text" id="detailAddress" name="detailAddress"></td>
			</tr>
			<tr>
				<td><label for="zipcode">우편번호:</label></td>
				<td><input type="text" id="zipcode" name="zipcode"></td>
			</tr>
			<tr>
				<td><label for="phoneNumber">전화번호:</label></td>
				<td><input type="text" id="phoneNumber" name="phoneNumber"></td>
			</tr>
			<tr>
				<td><label for="category">카테고리:</label></td>
				<td><input type="text" id="category" name="category"></td>
			</tr>
			<tr>
				<td><label for="description">설명:</label></td>
				<td><textarea id="description" name="description"></textarea></td>
			</tr>
			<tr>
				<td colspan="2">
					<button type="button" id="submitForm">등록</button>
				</td>
			</tr>
		</table>
	</form>

	<p id="response"></p>
</body>
</html>