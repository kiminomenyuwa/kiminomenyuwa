<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>리뷰 작성</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <style>
        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            font-size: 2.25rem;
            line-height: 2.5rem;
            justify-content: space-around;
            padding: 0 0.2em;
            text-align: center;
            width: 6em;
        }

        .star-rating input {
            display: none;
        }

        .star-rating label {
            -webkit-text-fill-color: transparent;
            -webkit-text-stroke-width: 2.3px;
            -webkit-text-stroke-color: #2b2a29;
            cursor: pointer;
        }

        .star-rating :checked ~ label {
            -webkit-text-fill-color: gold;
        }

        .star-rating label:hover,
        .star-rating label:hover ~ label {
            -webkit-text-fill-color: #fff58c;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>리뷰 작성</h1>
    <form th:action="@{/reviews}" th:object="${reviewRequestDTO}" method="post" enctype="multipart/form-data">
        <!-- 가게 ID를 숨겨진 필드로 전달 -->
        <input type="hidden" th:field="*{storeId}"/>

        <!-- 현재 로그인된 사용자 ID를 숨겨진 필드로 설정 -->
        <input type="hidden" name="userId" th:value="${#authentication.name}"/>


        <!-- 별점 UI -->
        <label for="rating">평점:</label>
        <div class="star-rating mx-auto">
            <input type="radio" id="5-stars" name="rating" value="5" th:field="*{rating}"/>
            <label for="5-stars" class="star pr-4">★</label>
            <input type="radio" id="4-stars" name="rating" value="4" th:field="*{rating}"/>
            <label for="4-stars" class="star">★</label>
            <input type="radio" id="3-stars" name="rating" value="3" th:field="*{rating}"/>
            <label for="3-stars" class="star">★</label>
            <input type="radio" id="2-stars" name="rating" value="2" th:field="*{rating}"/>
            <label for="2-stars" class="star">★</label>
            <input type="radio" id="1-star" name="rating" value="1" th:field="*{rating}"/>
            <label for="1-star" class="star">★</label>
        </div>

        <!-- 리뷰 내용 입력 -->
        <label for="comment">리뷰 내용:</label>
        <textarea th:field="*{comment}" class="form-control" rows="4" cols="50"></textarea><br/>

        <!-- 사진 업로드 -->
        <label for="photos">사진 업로드:</label>
        <input type="file" th:field="*{photos}" class="form-control-file" multiple/><br/>

        <!-- 제출 버튼 -->
        <button type="submit" class="btn btn-primary">리뷰 제출</button>
    </form>
</div>
</body>
</html>
