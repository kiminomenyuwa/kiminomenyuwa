<!-- src/main/resources/templates/merchantView/merchantStoreDetails.html -->
<!DOCTYPE html>
<html xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'가게 관리 - ' + ${storeDetails.name}">가게 관리</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            padding-top: 70px;
        }

        .store-photo {
            max-width: 100%;
            height: auto;
        }

        .menu-item, .review-item {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<!-- 네비게이션 바 -->
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">가게 관리</a>
        <button aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler"
                data-bs-target="#navbarNav" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/merchant/stores">가게 목록</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/merchant/stores/registration">가게 등록</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link"
                       th:href="@{/merchant/stores/{storeId}/menus/registration(storeId = ${storeId})}">메뉴 등록</a>
                </li>
                <li class="nav-item">
                        <span class="navbar-text me-3">
                            로그인한 사장님: <strong sec:authentication="name">사장님 이름</strong>
                        </span>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">로그아웃</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- 페이지 콘텐츠 -->
<div class="container">
    <h1 class="mb-4" th:text="'가게 관리 - ' + ${storeDetails.name}">가게 관리</h1>

    <!-- 가게 상세 정보 카드 -->
    <div class="card mb-4">
        <div class="card-header">
            가게 정보
        </div>
        <div class="card-body">
            <h5 class="card-title" th:text="${storeDetails.name}">가게 이름</h5>
            <p class="card-text"><strong>카테고리:</strong> <span th:text="${storeDetails.category}">카테고리</span></p>
            <p class="card-text"><strong>인증:</strong> <span th:text="${storeDetails.certification}">인증</span></p>
            <p class="card-text"><strong>주소:</strong>
                <span th:text="${storeDetails.roadNameAddress}">도로명 주소</span>,
                <span th:text="${storeDetails.detailAddress}">상세 주소</span>,
                <span th:text="${storeDetails.zipcode}">우편번호</span>
            </p>
            <p class="card-text"><strong>전화번호:</strong> <span th:text="${storeDetails.phoneNumber}">전화번호</span></p>
            <p class="card-text"><strong>상태:</strong> <span th:text="${storeDetails.enabled} ? '활성' : '비활성'">상태</span>
            </p>
            <p class="card-text"><strong>설명:</strong> <span th:text="${storeDetails.description}">설명</span></p>
            <p class="card-text"><strong>위도:</strong> <span th:text="${storeDetails.latitude}">위도</span></p>
            <p class="card-text"><strong>경도:</strong> <span th:text="${storeDetails.longitude}">경도</span></p>
        </div>
    </div>

    <!-- 사진 갤러리 -->
    <div class="mb-4">
        <h3>사진 갤러리</h3>
        <div class="row">
            <div class="col-md-4" th:each="photoUrl : ${storeDetails.photoUrls}">
                <img alt="Store Photo" class="store-photo mb-3" th:src="@{${photoUrl}}">
            </div>
        </div>
    </div>

    <!-- 메뉴 목록 -->
    <div class="mb-4">
        <h3>메뉴 목록</h3>
        <div class="row">
            <div class="col-md-4 menu-item" th:each="menu : ${storeDetails.menus}">
                <div class="card">
                    <img alt="Menu Picture" class="card-img-top" th:src="@{'/'+${menu.pictureUrl}}">
                    <div class="card-body">
                        <h5 class="card-title" th:text="${menu.name}">메뉴 이름</h5>
                        <p class="card-text"><strong>가격:</strong> <span th:text="${menu.price}">가격</span></p>
                        <p class="card-text"><strong>카테고리:</strong>
                            <span th:each="category : ${menu.categories}" th:text="${category} + ' '">카테고리</span>
                        </p>
                        <p class="card-text"><strong>상태:</strong> <span
                                th:text="${menu.enabled} ? '활성' : '비활성'">상태</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 리뷰 목록 -->
    <div class="mb-4">
        <h3>리뷰 목록</h3>
        <div class="list-group">
            <div class="list-group-item review-item" th:each="review : ${storeDetails.reviews}">
                <h5 th:text="'리뷰 ID: ' + ${review.reviewId}">리뷰 ID</h5>
                <p><strong>작성자:</strong> <span th:text="${review.userId}">작성자 ID</span></p>
                <p><strong>평점:</strong> <span th:text="${review.rating}">평점</span>/5</p>
                <p><strong>내용:</strong> <span th:text="${review.content}">리뷰 내용</span></p>
                <p><strong>작성일:</strong> <span
                        th:text="${#dates.format(review.createdTime, 'yyyy-MM-dd HH:mm')}">작성일</span></p>
            </div>
        </div>
    </div>

    <!-- 가게 수정 및 삭제 버튼 -->
    <div class="mb-3">
        <a class="btn btn-primary" th:href="@{'/merchant/stores/edit/' + ${storeDetails.storeId}}">가게 수정</a>
        <form method="post" style="display:inline;" th:action="@{'/merchant/stores/delete/' + ${storeDetails.storeId}}">
            <input name="_method" type="hidden" value="delete"/>
            <button class="btn btn-danger" onclick="return confirm('정말 삭제하시겠습니까?');" type="submit">가게 삭제</button>
        </form>
    </div>
</div>

<!-- Bootstrap JS 및 의존성 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
